!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactGM=t(require("react")):e.ReactGM=t(e.React)}(this,function(e){return function(e){function t(n){if(a[n])return a[n].exports;var l=a[n]={exports:{},id:n,loaded:!1};return e[n].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(4),i=n(l),r=a(2),c=n(r),u=a(3),s=n(u);a(5),t.Grid=i.default,t.Pagination=c.default,t.PaginationText=s.default},function(t,a){t.exports=e},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(1),i=n(l),r=i.default.createClass({displayName:"Pagination",propTypes:{data:i.default.PropTypes.shape({count:i.default.PropTypes.number.isRequired,offset:i.default.PropTypes.number.isRequired,limit:i.default.PropTypes.number.isRequired}),toPage:i.default.PropTypes.func.isRequired},render:function(){var e=this.props.data;e.index=e.offset/e.limit+1;var t=2,a=[],n=Math.ceil(e.count/e.limit),l=Math.max(e.index-t,1),r=Math.min(e.index+t,n);n>2*t+1&&(1===l?r+=t:r===n&&(l-=t));for(var c=l;r>=c;c++)a.push(c);return i.default.createElement("div",{className:"gm-pagination"},i.default.createElement("ul",{className:"pagination pagination-sm",onClick:this.onPage},i.default.createElement("li",{className:1===e.index?"disabled":""},i.default.createElement("a",{href:"javascript:;","data-page":e.index-1},"上一页")),l>=2?i.default.createElement("li",null,i.default.createElement("a",{href:"javascript:;","data-page":"1"},"1")):"",l>=3?i.default.createElement("li",{className:"disabled"},i.default.createElement("a",{href:"javascript:;"},"...")):"",a.map(function(t){return i.default.createElement("li",{className:e.index===t?"active":""},i.default.createElement("a",{href:"javascript:;","data-page":t},t))}),n-2>=r?i.default.createElement("li",{className:"disabled"},i.default.createElement("a",{href:"javascript:;"},"...")):"",n-1>=r?i.default.createElement("li",null,i.default.createElement("a",{href:"javascript:;","data-page":n},n)):"",i.default.createElement("li",{className:e.index===n?"disabled":""},i.default.createElement("a",{href:"javascript:;","data-page":e.index+1},"下一页"))))},onPage:function(e){var t=~~e.target.getAttribute("data-page"),a=this.props.data,n=Math.ceil(a.count/a.limit),l=this.props.toPage;!t||t==a.index||1>t||t>n||l({offset:(t-1)*a.limit,limit:a.limit},t)}});t.default=r,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(1),i=n(l),r=i.default.createClass({displayName:"PaginationText",propTypes:{data:i.default.PropTypes.shape({count:i.default.PropTypes.number.isRequired,offset:i.default.PropTypes.number.isRequired,limit:i.default.PropTypes.number.isRequired})},render:function(){var e=this.props.data;return i.default.createElement("div",{className:"gm-pagination-text"},"显示第 ",e.offset+1," 到 ",Math.min(e.count,e.offset+e.limit-1)," 行，一共 ",e.count," 行记录")}});t.default=r,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(1),i=n(l),r=a(2),c=n(r),u=a(3),s=n(u),d=i.default.createClass({displayName:"GridHead",render:function(){var e=this.props.data;return i.default.createElement("thead",null,i.default.createElement("tr",null,e.enableSelect?i.default.createElement("th",{className:"gm-grid-select"},i.default.createElement("input",{type:"checkbox",onClick:this.onSelect})):"",e.columns.map(function(e){return i.default.createElement("th",null,e.name)}),e.actions.length>0?i.default.createElement("th",null,"操作"):""))},onSelect:function f(e){var f=this.props.onSelect;f(e.target.checked)}}),o=i.default.createClass({displayName:"Grid",processData:function(e){return e=Object.assign({enableSelect:!1,enablePagination:!1,enablePaginationText:!1,actions:[],batchs:[],list:[],toPage:function(){}},e),e.actions.forEach(function(e){e.isShow=e.isShow||function(){return!0}}),e.list.forEach(function(e){e.___select=!1}),e},getInitialState:function(){return{data:this.processData(this.props.data)}},componentWillReceiveProps:function(e){this.setState({data:this.processData(e.data)})},render:function(){var e=this,t=this.state.data,a=t.actions,n=t.batchs,l=t.list.map(function(n,l){var r=t.columns.map(function(e){return e.render?i.default.createElement("td",null,""+e.render(n[e.field],n)):i.default.createElement("td",null,""+n[e.field])}),c=a.map(function(t){var a="btn btn-default btn-xs "+t.className;return t.isShow(n,l)===!1&&(a+=" hidden"),i.default.createElement("button",{onClick:e.onActions.bind(e,n,l,t),className:a},t.text)});return i.default.createElement("tr",null,t.enableSelect?i.default.createElement("td",null,i.default.createElement("input",{type:"checkbox",checked:n.___select,onClick:e.onSelect.bind(e,n)})):"",r,a.length>0?i.default.createElement("td",null,c):"")}),r=n.map(function(t){var a="btn btn-default btn-sm "+t.className;return i.default.createElement("button",{onClick:e.onBatchs.bind(e,t),className:a},t.text)}),u=i.default.createElement("div",null,t.enablePagination?i.default.createElement("div",{className:"pull-right"},i.default.createElement(c.default,{data:t.pagination,toPage:e.onToPage})):"",t.enablePaginationText?i.default.createElement("div",{className:"pull-right"},i.default.createElement(s.default,{data:t.pagination})):"");return i.default.createElement("div",{className:"gm-grid"},i.default.createElement("table",{className:"table table-striped table-hover table-condensed table-bordered"},i.default.createElement(d,{data:t,onSelect:e.onSelectAll}),i.default.createElement("tbody",null,l)),i.default.createElement("div",{className:"gm-grid-foot clearfix"},i.default.createElement("div",{className:"pull-left gm-grid-batch"},t.enableSelect?r:""),t.pagination?u:""))},onActions:function(e,t,a){a.click(e,t)},onBatchs:function(e){var t=this.state.data.list.filter(function(e){return e.___select});t.length>0&&e.click(t)},onSelect:function(e,t){e.___select=t.target.checked,this.setState({list:this.state.data.list})},onSelectAll:function(e){this.setState({list:this.state.data.list.map(function(t){t.___select=e})})},onToPage:function(e,t){this.state.data.toPage(e,t)}});t.default=o,e.exports=t.default},function(e,t){}])});