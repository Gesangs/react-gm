!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("underscore"),require("react-dom"),require("moment"),require("react-bootstrap")):"function"==typeof define&&define.amd?define(["react","underscore","react-dom","moment","react-bootstrap"],t):"object"==typeof exports?exports.ReactGM=t(require("react"),require("underscore"),require("react-dom"),require("moment"),require("react-bootstrap")):e.ReactGM=t(e.react,e.underscore,e["react-dom"],e.moment,e["react-bootstrap"])}(this,function(e,t,a,n,r){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(18),l=n(r),i=a(7),o=n(i),s=a(8),c=n(s),u=a(6),d=n(u),f=a(17),p=n(f),m=a(12),h=n(m),g=a(22),v=n(g),y=a(9),b=n(y),E=a(19),_=n(E),N=a(20),k=n(N),x=a(4),P=n(x),C=a(15),S=n(C),D=a(16),j=n(D),M=a(14),O=n(M);a(23);var T={Grid:l.default,Pagination:o.default,PaginationText:c.default,Former:p.default,Calendar:P.default,DatePicker:S.default,DateRangePicker:j.default,AnimationIcon:O.default,ValidateMixin:v.default,Validate:h.default,ImportLead:_.default,Droper:d.default,Util:b.default,Storage:k.default};t.default=T},function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),i=a(5),o=n(i),s=l.default.createClass({displayName:"Day",render:function(){var e=this.props.nowMoment,t=this.props.moment,a=this.props.selected,n=["gm-calendar-day"];return e.month()>t.month()?n.push("gm-calendar-day-old"):e.month()<t.month()&&n.push("gm-calendar-day-new"),+a.startOf("day")===+t.startOf("day")&&n.push("gm-calendar-active"),l.default.createElement("span",{className:n.join(" "),onClick:this.handleClick},t.date())},handleClick:function(){this.props.onClick(this.props.moment)}}),c=l.default.createClass({displayName:"Calendar",propTypes:{selected:l.default.PropTypes.object,onSelect:l.default.PropTypes.func},getDefaultProps:function(){return{selected:new Date,onSelect:function(){}}},getInitialState:function(){return{selected:this.props.selected,moment:o.default(this.props.selected),isSelectMonth:!1,weekDays:["日","一","二","三","四","五","六"]}},componentWillReceiveProps:function(e){e.selected&&this.setState({selected:e.selected})},handleChangeMonth:function(e){this.setState({moment:this.state.moment.month(e),isSelectMonth:!1})},handleSelectMonth:function(){this.setState({isSelectMonth:!this.state.isSelectMonth})},handleSelectDay:function(e){this.props.onSelect(e.toDate())},renderHead:function(){var e=o.default(this.state.moment),t=e.month();return l.default.createElement("div",{className:"gm-calendar-head text-center clearfix"},l.default.createElement("a",{href:"javascript:;",className:"gm-calendar-head-pre pull-left",onClick:this.handleChangeMonth.bind(this,t-1)},l.default.createElement("i",{className:"fa fa-caret-left fa-lg"})),l.default.createElement("span",{className:"gm-calendar-head-title"},l.default.createElement("span",{className:"gm-calendar-head-month",onClick:this.handleSelectMonth},t+1,"月"),l.default.createElement("span",null,"  ",e.year())),l.default.createElement("a",{href:"javascript:;",className:"gm-calendar-head-next pull-right",onClick:this.handleChangeMonth.bind(this,t+1)},l.default.createElement("i",{className:"fa fa-caret-right fa-lg"})))},renderWeek:function(){return l.default.createElement("div",{className:"gm-calendar-week"},this.state.weekDays.map(function(e,t){return l.default.createElement("span",{key:t,className:"gm-calendar-day-name"},e)}))},renderMonth:function(){for(var e=this.state.moment.month(),t=[],a="gm-calendar-month",n=0;12>n;n++)t.push(l.default.createElement("span",{key:n,className:n===e?a+" gm-calendar-active":a,onClick:this.handleChangeMonth.bind(this,n)},n+1,"月"));return l.default.createElement("div",{className:"gm-calendar-months"},t)},renderContent:function(){for(var e=o.default(this.state.moment).startOf("month").day(0).add(-1,"day"),t=[],a=0;42>a;a++)t.push(l.default.createElement(s,{key:a,selected:o.default(this.state.selected),nowMoment:this.state.moment,moment:o.default(e.add(1,"day")),onClick:this.handleSelectDay}));return l.default.createElement("div",{className:"gm-calendar-content"},t)},render:function(){var e=this;return l.default.createElement("div",{className:"gm-calendar"},e.renderHead(),e.renderWeek(),e.renderContent(),e.state.isSelectMonth?e.renderMonth():void 0)}});t.default=c},function(e,t){e.exports=n},function(e,t,a){"use strict";function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(1),c=function(e){function t(e,a){r(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e,a));return n.onClick=n.onClick.bind(n),n.onDragEnter=n.onDragEnter.bind(n),n.onDragLeave=n.onDragLeave.bind(n),n.onDragOver=n.onDragOver.bind(n),n.onDrop=n.onDrop.bind(n),n.state={isDragActive:!1},n}return i(t,e),o(t,[{key:"componentDidMount",value:function(){this.enterCounter=0}},{key:"accept",value:function(e,t){if(e&&t){var a=function(){var a=t.split(","),n=e.name||"",r=e.type||"",l=r.replace(/\/.*$/,"");return{v:a.some(function(e){var t=e.trim();return"."===t.charAt(0)?n.toLowerCase().endsWith(t.toLowerCase()):/\/\*$/.test(t)?l===t.replace(/\/.*$/,""):r===t})}}();if("object"===("undefined"==typeof a?"undefined":n(a)))return a.v}return!0}},{key:"allFilesAccepted",value:function(e){var t=this;return e.every(function(e){return t.accept(e,t.props.accept)})}},{key:"onDragEnter",value:function(e){e.preventDefault(),++this.enterCounter;var t=e.dataTransfer&&e.dataTransfer.items?e.dataTransfer.items:[],a=Array.prototype.slice.call(t),n=this.allFilesAccepted(a);this.setState({isDragActive:n,isDragReject:!n}),this.props.onDragEnter&&this.props.onDragEnter(e)}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDragLeave",value:function(e){e.preventDefault(),--this.enterCounter>0||(this.setState({isDragActive:!1,isDragReject:!1}),this.props.onDragLeave&&this.props.onDragLeave(e))}},{key:"onDrop",value:function(e){e.preventDefault(),this.enterCounter=0,this.setState({isDragActive:!1,isDragReject:!1});for(var t=e.dataTransfer?e.dataTransfer.files:e.target.files,a=this.props.multiple?t.length:1,n=[],r=0;a>r;r++){var l=t[r];l.preview=window.URL.createObjectURL(l),n.push(l)}this.props.onDrop&&this.props.onDrop(n,e),this.allFilesAccepted(n)?this.props.onDropAccepted&&this.props.onDropAccepted(n,e):this.props.onDropRejected&&this.props.onDropRejected(n,e)}},{key:"onClick",value:function(){this.props.disableClick||this.open()}},{key:"open",value:function(){var e=this.refs.fileInput;e.value=null,e.click()}},{key:"render",value:function(){var e="gm-droper ";return e+=this.props.className?this.props.className:" gm-droper-default ",s.createElement("div",{className:e,onClick:this.onClick,onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},this.props.children,s.createElement("input",{type:"file",ref:"fileInput",className:"gm-droper-input",multiple:this.props.multiple,accept:this.props.accept,onChange:this.onDrop}))}}]),t}(s.Component);c.defaultProps={disableClick:!1,multiple:!0},c.propTypes={onDrop:s.PropTypes.func,onDropAccepted:s.PropTypes.func,onDropRejected:s.PropTypes.func,onDragEnter:s.PropTypes.func,onDragLeave:s.PropTypes.func,disableClick:s.PropTypes.bool,multiple:s.PropTypes.bool,accept:s.PropTypes.string},e.exports=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),i=l.default.createClass({displayName:"Pagination",propTypes:{data:l.default.PropTypes.shape({count:l.default.PropTypes.number.isRequired,offset:l.default.PropTypes.number.isRequired,limit:l.default.PropTypes.number.isRequired}),toPage:l.default.PropTypes.func.isRequired},render:function(){var e=Object.assign({},this.props.data);e.index=e.offset/e.limit+1;var t=2,a=[],n=Math.ceil(e.count/e.limit),r=Math.max(e.index-t,1),i=Math.min(e.index+t,n);n>2*t+1&&(1===r?i+=t:i===n&&(r-=t));for(var o=r;i>=o;o++)a.push(o);return l.default.createElement("div",{className:"gm-pagination"},l.default.createElement("ul",{className:"pagination pagination-sm",onClick:this.onPage},l.default.createElement("li",{className:1===e.index?"disabled":""},l.default.createElement("a",{href:"javascript:;","data-page":e.index-1},"上一页")),r>=2?l.default.createElement("li",null,l.default.createElement("a",{href:"javascript:;","data-page":"1"},"1")):void 0,r>=3?l.default.createElement("li",{className:"disabled"},l.default.createElement("a",{href:"javascript:;"},"...")):void 0,a.map(function(t,a){return l.default.createElement("li",{key:a,className:e.index===t?"active":""},l.default.createElement("a",{href:"javascript:;","data-page":t},t))}),n-2>=i?l.default.createElement("li",{className:"disabled"},l.default.createElement("a",{href:"javascript:;"},"...")):void 0,n-1>=i?l.default.createElement("li",null,l.default.createElement("a",{href:"javascript:;","data-page":n},n)):void 0,l.default.createElement("li",{className:e.index===n?"disabled":""},l.default.createElement("a",{href:"javascript:;","data-page":e.index+1},"下一页"))))},onPage:function(e){var t=~~e.target.getAttribute("data-page"),a=this.props.data,n=Math.ceil(a.count/a.limit),r=this.props.toPage;!t||t==a.index||1>t||t>n||r({offset:(t-1)*a.limit,limit:a.limit},t)}});t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),i=l.default.createClass({displayName:"PaginationText",propTypes:{data:l.default.PropTypes.shape({count:l.default.PropTypes.number.isRequired,offset:l.default.PropTypes.number.isRequired,limit:l.default.PropTypes.number.isRequired})},render:function(){var e=this.props.data;return l.default.createElement("div",{className:"gm-pagination-text"},"显示第 ",e.offset+1," 到 ",Math.min(e.count,e.offset+e.limit-1)," 行，一共 ",e.count," 行记录")}});t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(21),l=n(r),i=a(11),o=n(i),s=a(10),c=n(s),u={Request:l.default,format:c.default,param:o.default};t.default=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(2),l=n(r),i=function(e,t){var a=e;return arguments.length<2?a:a=a.replace(/\{([\d\w\.]+)\}/g,function(e){var a=arguments[1].split("."),n=null;return l.default.each(a,function(e,a){n=a?n[e]:t[e]}),n})};t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(2),l=n(r),i=function(e){return l.default.map(e,function(e,t){return[encodeURIComponent(t),"=",encodeURIComponent(e)].join("")}).join("&").replace(/%20/g,"+")};t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(2),l=n(r),i=a(9),o=n(i),s={"*":"\\*"},c={def:"请填写正确的信息！",w:{},reck:"两次输入的内容不一致！",ok:"通过信息验证！"},u={},d=[],f=function(e){var t={},a=l.default.map(l.default.keys(u),function(e){return s[e]?s[e]:e}).join("|"),n=new RegExp("^("+a+")((\\d*)((-)(\\d*))?)?$");return e.replace(n,function(){t.type=arguments[1],t.min=arguments[3],t.cross=arguments[4],t.max=arguments[6]}),t},p=function(e){if(l.default.isRegExp(e))return c.def;var t=f(e);return-1===d.indexOf(t.type)?t.max?o.default.format(c.w[t.type][3],t):t.cross?o.default.format(c.w[t.type][2],t):t.min?o.default.format(c.w[t.type][1],t):c.w[t.type][0]:c.w[t.type]||c.def},m=function(e,t,a){var n;if(a=a||!1,l.default.isRegExp(e))n=e.test(t);else{var r=f(e),i=["^",u[r.type]||r.type];-1===d.indexOf(r.type)&&(i=void 0===r.min?i.concat(["+"]):r.cross?i.concat(["{",r.min,",",void 0===r.max?"":r.max,"}"]):i.concat(["{",r.min,"}"])),n=new RegExp(i.concat(["$"]).join("")).test(t)}return n?!0:a?p(e):!1};m.factory=function(e,t){var a=l.default.extend({range:!1},t());c.w[e]=a.tip,u[e]=a.rule,a.range===!1&&d.push(e)},m.factory("*",function(){return{range:!0,rule:"[\\w\\W]",tip:["不能为空！","请填写{min}位任意字符！","请填写至少{min}位任意字符！","请填写{min}到{max}位任意字符！"]}}),m.factory("n",function(){return{range:!0,rule:"\\d",tip:["请填写数字！","请填写{min}位数字！","请填写至少{min}位数字！","请填写{min}到{max}位数字！"]}}),m.factory("s",function(){return{range:!0,rule:"[\\u4E00-\\u9FA5\\uf900-\\ufa2d\\w\\.\\s]",tip:["不能输入特殊字符！","请填写{min}位字符！","请填写至少{min}位字符！","请填写{min}到{max}位字符！"]}}),m.factory("l",function(){return{range:!0,rule:"[a-zA-Z]",tip:["请填写字母！","请填写{min}位字母！","请填写至少{min}位字母！","请填写{min}到{max}位字母！"]}}),m.factory("nl",function(){return{range:!0,rule:"[a-zA-Z0-9]",tip:["请填写字母或数字！","请填写{min}位字母或数字！","请填写至少{min}位字母或数字！","请填写{min}到{max}位字母或数字！"]}}),m.factory("zh",function(){return{range:!0,rule:"[\\u4e00-\\u9fa5]",tip:["请填写汉字！","请填写{min}位汉字！","请填写至少{min}位汉字！","请填写{min}到{max}位汉字！"]}}),m.factory("p",function(){return{rule:"[0-9]{6}",tip:"请填写邮政编码"}}),m.factory("m",function(){return{rule:"13[0-9]{9}$|14[0-9]{9}|15[0-9]{9}$|18[0-9]{9}",tip:"请填写手机号码"}}),m.factory("e",function(){return{rule:"\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*",tip:"请填写邮件地址"}}),m.factory("url",function(){return{rule:"(\\w+:\\/\\/)?\\w+(\\.\\w+)+.*",tip:"请填写网址"}}),m.factory("num",function(){return{rule:"[+-]?((\\d+.\\d+)|(\\d+))",tip:"请填写数字！"}}),t.default=m},function(e,t){e.exports=r},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),i=l.default.createClass({displayName:"AnimationIcon",getInitialState:function(){return{state:this.props.state?this.props.state:"rolling",rolling:!0}},render:function(){var e=this.state.state,t="roll",a="",n="",r="",i="";switch(e){case"success":r="animation-icon",t="hide-path success",a="show",n="",i="show-circle success";break;case"error":r="animation-icon",t="hide-path",a="",n="show",i="show-circle error";break;default:r="animation-icon roll",t="",a="",n=""}return l.default.createElement("svg",{className:r,version:"1.1",viewBox:"0 0 100 100"},l.default.createElement("circle",{className:i,cx:"50",cy:"50",r:"43"}),l.default.createElement("path",{className:t,d:"M75.201,15.155C68.119,10.024,59.413,7,50,7C31.591,7,15.885,18.568,9.753,34.831"}),l.default.createElement("polyline",{className:a,points:"9.756,34.833 46.189,65.404 75.199,15.158"}),l.default.createElement("g",{className:n},l.default.createElement("line",{x1:"31.209",y1:"31.209",x2:"68.791",y2:"68.791"}),l.default.createElement("line",{x1:"31.209",y1:"68.791",x2:"68.791",y2:"31.209"})))},componentDidMount:function(){this.startInterval()},startInterval:function(){var e=setInterval(function(){switch(this.props.state){case"success":clearInterval(e),this.setState({state:"success"});break;case"error":clearInterval(e),this.setState({state:"error"});break;default:this.setState({state:"rolling"})}}.bind(this),500)},componentWillReceiveProps:function(e){"rolling"===e.state&&this.startInterval()}});t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),i=a(3),o=(n(i),a(5)),s=n(o),c=a(13),u=a(4),d=n(u),f=l.default.createClass({displayName:"DatePicker",propTypes:{date:l.default.PropTypes.object.isRequired,onChange:l.default.PropTypes.func.isRequired,inputClassName:l.default.PropTypes.string,target:l.default.PropTypes.func},getInitialState:function(){return{id:"_gm_datepicker_id"+(Math.random()+"").slice(2)}},renderPopover:function(){return l.default.createElement(c.Popover,{id:this.state.id,className:"gm-datepicker-popover"},l.default.createElement(d.default,{selected:this.props.date,onSelect:this.handleSelect}))},handleSelect:function(e){this.refs.target?this.refs.target.click():this.props.target().click(),this.props.onChange(e)},handleChange:function(){},render:function(){return l.default.createElement("div",{className:"gm-datepicker"},l.default.createElement(c.OverlayTrigger,{trigger:"click",rootClose:!0,placement:"bottom",overlay:this.renderPopover()},this.props.children?this.props.children:l.default.createElement("input",{type:"text",className:this.props.inputClassName,ref:"target",value:s.default(this.props.date).format("YYYY-MM-DD"),onChange:this.handleChange})))}});t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),i=a(3),o=(n(i),a(5)),s=n(o),c=a(13),u=a(4),d=n(u),f=l.default.createClass({displayName:"DateRangePicker",propTypes:{begin:l.default.PropTypes.object.isRequired,end:l.default.PropTypes.object.isRequired,onChange:l.default.PropTypes.func.isRequired,inputClassName:l.default.PropTypes.string,target:l.default.PropTypes.func},getInitialState:function(){return{beginId:"_gm_datepicker_id"+(Math.random()+"").slice(2),endId:"_gm_datepicker_id"+(Math.random()+"").slice(2)}},handleSelect:function(e,t){"begin"===e?this.props.onChange(t,this.props.end):this.props.onChange(this.props.begin,t),this.refs.endTarget.click()},renderPopoverBegin:function(){return l.default.createElement(c.Popover,{id:this.state.beginId,className:"gm-datepicker-popover"},l.default.createElement(d.default,{selected:this.props.begin,onSelect:this.handleSelect.bind(this,"begin")}))},renderPopoverEnd:function(){return l.default.createElement(c.Popover,{id:this.state.endId,className:"gm-datepicker-popover"},l.default.createElement(d.default,{selected:this.props.end,onSelect:this.handleSelect.bind(this,"end")}))},handleChange:function(){},render:function(){return l.default.createElement("div",{className:"gm-datepicker gm-daterangepicker"},l.default.createElement(c.OverlayTrigger,{trigger:"click",rootClose:!0,placement:"bottom",overlay:this.renderPopoverBegin()},l.default.createElement("div",{ref:"beginTarget"},l.default.createElement("input",{type:"text",className:this.props.inputClassName,value:s.default(this.props.begin).format("YYYY-MM-DD"),onChange:this.handleChange}))),l.default.createElement("span",null," ~ "),l.default.createElement(c.OverlayTrigger,{trigger:"click",rootClose:!0,placement:"bottom",overlay:this.renderPopoverEnd()},l.default.createElement("div",{ref:"endTarget"},l.default.createElement("input",{type:"text",className:this.props.inputClassName,value:s.default(this.props.end).format("YYYY-MM-DD"),onChange:this.handleChange}))))}});t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};Object.defineProperty(t,"__esModule",{value:!0});var i=a(1),o=n(i),s=o.default.createClass({displayName:"Form",getDefaultProps:function(){return{onSubmit:function(){}}},render:function(){return o.default.createElement("form",l({},this.props,{onSubmit:this.onSubmit,noValidate:!0}),this.props.children)},onSubmit:function(e){e.preventDefault(),this.props.onSubmit(e)}}),c={beforeField:function(){var e=this.props.label||this.props.name,t=this.___filed_id||"formerId"+(Math.random()+"").slice(2);this.___filed_id=t;var a=Object.assign({id:t,className:"form-control"},this.props);return-1===a.className.indexOf("form-control")&&(a.className="form-control "+a.className),{label:e,props:a}}},u=o.default.createClass({displayName:"Input",mixins:[c],render:function(){var e=Object.assign(this.beforeField(),{value:"",type:"text"},this.props),t=Object.assign({},e.props);return delete t.children,o.default.createElement("div",{className:"form-group"},o.default.createElement("label",{htmlFor:e.props.id},e.label),o.default.createElement("input",t),this.props.children)}}),d=o.default.createClass({displayName:"Select",mixins:[c],render:function(){var e=Object.assign(this.beforeField(),{value:"",options:[]},this.props),t=e.props.options.map(function(e,t){return"object"!==("undefined"==typeof e?"undefined":r(e))&&(e={value:e,text:e}),o.default.createElement("option",{key:t,value:e.value},e.text)});return delete e.props.options,o.default.createElement("div",{className:"form-group"},o.default.createElement("label",{htmlFor:e.props.id},e.label),o.default.createElement("select",e.props,this.props.children,t))}}),f=s;Object.assign(f,{Input:u,Select:d}),t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),i=a(7),o=n(i),s=a(8),c=n(s),u=a(2),d=n(u),f=l.default.createClass({displayName:"GridHead",render:function(){var e=this.props.data,t=!1;return e.list.length>0&&(t=d.default.filter(e.list,function(e){return e._gm_select}).length===e.list.length),l.default.createElement("thead",null,l.default.createElement("tr",null,e.enableSelect?l.default.createElement("th",{className:"gm-grid-select"},l.default.createElement("input",{type:"checkbox",checked:t,onChange:this.onSelect})):void 0,e.columns.map(function(e,t){return l.default.createElement("th",{key:t,style:e.style},e.name)}),e.actions.length>0?l.default.createElement("th",null,"操作"):void 0))},onSelect:function m(e){var m=this.props.onSelect;m(e.target.checked)}}),p=l.default.createClass({displayName:"Grid",processData:function(e){return e=Object.assign({enableSelect:!1,enablePagination:!1,enablePaginationText:!1,loading:!1,actions:[],batchs:[],list:[],select:function(){},selectAll:function(){},toPage:function(){}},e),e.actions.forEach(function(e){e.isShow=e.isShow||function(){return!0}}),e.list.forEach(function(e){e._gm_select=void 0===e._gm_select?!1:e._gm_select}),e},componentWillReceiveProps:function(e){this.setState({data:this.processData(e.data)})},render:function(){var e,t=this,a=this.processData(this.props.data),n=a.actions,r=a.batchs;a.loading?e=l.default.createElement("tr",null,l.default.createElement("td",{colSpan:"99",className:"text-center"},l.default.createElement("i",{className:"fa fa-spin fa-spinner fa-pulse"}))):0===a.list.length?e=l.default.createElement("tr",null,l.default.createElement("td",{colSpan:"99",className:"text-center"},"无")):a.list.length>0&&(e=a.list.map(function(e,r){var i=a.columns.map(function(t,a){return t.render?l.default.createElement("td",{key:a},t.render(e[t.field],e)):l.default.createElement("td",{key:a},e[t.field])}),o=n.map(function(a,n){var i="btn btn-default btn-xs "+a.className;return!!a.isShow(e,r)==!1&&(i+=" hidden"),l.default.createElement("button",{key:n,onClick:t.onActions.bind(t,e,r,a),className:i},a.text)});return l.default.createElement("tr",{key:r},a.enableSelect?l.default.createElement("td",null,l.default.createElement("input",{type:"checkbox",checked:e._gm_select,onChange:t.onSelect.bind(t,r)})):void 0,i,n.length>0?l.default.createElement("td",null,o):void 0)}));var i=r.map(function(e,a){var n="btn btn-default btn-sm "+e.className;return l.default.createElement("button",{key:a,onClick:t.onBatchs.bind(t,e),className:n},e.text)}),s=l.default.createElement("div",null,a.enablePagination?l.default.createElement("div",{className:"pull-right"},l.default.createElement(o.default,{data:a.pagination,toPage:t.onToPage})):void 0,a.enablePaginationText?l.default.createElement("div",{className:"pull-right"},l.default.createElement(c.default,{data:a.pagination})):void 0);return l.default.createElement("div",{className:"gm-grid"},l.default.createElement("table",{className:"table table-striped table-hover table-condensed table-bordered"},l.default.createElement(f,{data:a,onSelect:t.onSelectAll}),l.default.createElement("tbody",null,e)),l.default.createElement("div",{className:"gm-grid-foot clearfix"},l.default.createElement("div",{className:"pull-left gm-grid-batch"},a.enableSelect?i:void 0),a.pagination?s:void 0))},onActions:function(e,t,a){a.click(e,t)},onBatchs:function(e){var t=this.props.data.list.filter(function(e){return e._gm_select});t.length>0&&e.click(t)},onSelect:function(e){this.props.data.select(e)},onSelectAll:function(e){this.props.data.selectAll(e)},onToPage:function(e,t){this.state.data.toPage(e,t)}});t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(3),l=a(2),i=a(6),o=n.createClass({displayName:"ImportLead",getInitialState:function(){return{selectedFile:null}},render:function(){var e=this,t=this,a=l.extend({columns:[],list:[]},t.props.data),r=t.props.tips||[],o={},s=l.map(a.list,function(){return!1});l.each(r,function(e,t){o[e.index]=o[e.index]||{},e._index=t,o[e.index][e.field]=e,e.modifyed||(s[e.index]=!0)});var c=a.list.map(function(e,r){var l=a.columns.map(function(a,l){var i=o[r]&&o[r][a.field];return i?n.createElement("td",{key:l,className:i.modifyed?"gm-bg-info":"gm-bg-invalid"},n.createElement("input",{type:"text",value:e[a.field],onChange:t.handleEdit.bind(t,r,a.field,i._index)}),n.createElement("small",{className:"gm-import-lead-tip badge"},n.createElement("i",null,i.msg))):n.createElement("td",{key:l},e[a.field])});return n.createElement("tr",{key:r},l)}),u=l.filter(r,function(e){return e.modifyed===!0}).length===r.length,d=t.state.selectedFile?t.state.selectedFile.name:"",f=t.props.fileTempUrl;return n.createElement("div",{className:"gm-import-lead"},n.createElement("div",null,n.createElement("div",null,n.createElement(i,{className:"gm-droper-wrap",onDrop:this.handleDrop,accept:".xlsx"},n.createElement("button",{className:"btn btn-primary btn-sm"},"上传xlsx")),"    ",n.createElement("button",{disabled:!u,className:"btn btn-primary btn-sm",onClick:this.handleSubmit},"提交"),"    ",f?n.createElement("a",{href:f,target:"blank"},"上传模板下载"):void 0,n.createElement("div",null,d)),n.createElement("div",{className:"gm-import-line clearfix"},s.map(function(t,a){return n.createElement("div",{key:a,className:t?"tip":"",onClick:e.handleLine.bind(e,a)})}))),n.createElement("div",{className:"gm-import-lead-content",ref:"content"},a?n.createElement("table",{className:"table table-condensed table-bordered",ref:"table"},n.createElement("thead",null,n.createElement("tr",null,a.columns.map(function(e,t){return n.createElement("th",{key:t},e.name)}))),n.createElement("tbody",null,c)):void 0))},handleEdit:function(e,t,a,n){var r=this;r.props.onEdit&&r.props.onEdit(e,t,n.target.value,a)},handleSubmit:function(e){var t=this;e.preventDefault(),t.props.onSubmit&&t.props.onSubmit()},handleLine:function(e){var t=this,a=r.findDOMNode(t.refs.content),n=r.findDOMNode(t.refs.table);a.scrollTop=e/t.props.data.list.length*n.offsetHeight},handleDrop:function(e){var t=this;t.setState({selectedFile:e[0]}),e[0]&&t.props.onDrop&&t.props.onDrop(e[0])}});t.default=o},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),i=a(2),o=n(i),s=l.default.PropTypes,c="_react-gm_",u=l.default.createClass({displayName:"Storage",statics:{set:function(e,t){localStorage.setItem(c+e,JSON.stringify(t))},get:function(e){var t=localStorage.getItem(c+e);return t?JSON.parse(t):t},remove:function(e){localStorage.removeItem(c+e)},clear:function(){localStorage.clear()},getAll:function(){for(var e,t={},a=0;a<localStorage.length;a++)e=localStorage.key(a),e.startsWith(c)&&(e=e.slice(c.length),t[e]=u.get(e));return o.default.keys(t)?t:null}},propTypes:{name:s.string.isRequired,value:s.oneOfType([s.string,s.object,s.array]),autoSave:s.bool},getDefaultProps:function(){return{useRaw:!1,autoSave:!0}},save:function(){u.set(this.props.name,value)},componentWillUpdate:function(){this.props.autoSave&&this.save()},componentWillMount:function(){this.save()},render:function(){return null}});t.default=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(11),l=n(r),i=a(10),o=n(i),s=a(2),c=n(s),u=function(e,t,a){var n="color: #8a6d3b;";return e.then(function(e){return e.ok?e.json():Promise.reject(o.default("服务器错误 {status} {statusText}",e))}).then(function(e){return a.indexOf(e.code)>-1?e:(console.log("%c*** Request url: %s、code: %s、msg: %s",n,t,e.code,e.msg),Promise.reject(e.msg||"未知错误"))}).catch(function(e){return console.log("%c*** Request catch %s",n,e),Promise.reject(""+e)})},d=function(e,t){this._data={},this.url=e,this.sucCode=[0],this.options=Object.assign({method:"get",credentials:"include"},t)};d.prototype={code:function(e){return c.default.isArray(e)?this.sucCode.concat(e):this.sucCode.push(e),this},data:function(e){return this._data=e||{},this},json:function(e){return this._data=JSON.stringify(e),this},get:function(){var e=l.default(this._data),t=this.url+(this.url.indexOf("?")>-1?"&":"?")+e;return u(fetch(t,this.options),this.url,this.sucCode)},post:function(){var e,t=this._data;if("[object Object]"===toString.call(t)){e=new FormData;for(var a in t)e.append(a,t[a])}else e=t;return this.options.method="post",this.options.body=e,u(fetch(this.url,this.options),this.url,this.sucCode)}};var f=function(e,t){return new d(e,t)};t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=(n(r),a(3)),i=n(l),o=a(2),s=n(o),c=a(12),u=n(c),d={error:"gm-invalid"},f=["onChange","onBlur","onFocus"],p=function v(e,t){if(t.props&&void 0!==t.props.name){var a;s.default.find(f,function(e){return t.props[e]?(a=t.props[e].___validate_rule,!0):void 0}),a&&e.push({name:t.props.name,rule:a})}else t.props&&t.props.children&&s.default.isArray(t.props.children)?s.default.each(t.props.children,function(t){v(e,t)}):t.props&&t.props.children&&s.default.isObject(t.props.children)&&v(e,t.props.children)},m=function(e){var t=[];return p(t,e),t},h=function(e,t,a){var n=a.value,r=a.name,l=u.default(t,n,!0);e.tip[r]=l,l===!0?a.className=s.default.without(a.className.split(" "),d.error).join(" "):a.className=s.default.union(a.className.split(" "),[d.error]).join(" ")},g=function(){var e={tip:{}};return{validate:function(t,a){var n=this,r=function(r){h(e,t,r.target),n.setState({}),a&&a.apply(n,arguments,e.tip[r.target.name])};return r.___validate_rule=t,r},validateAll:function(t){if(!t)return!1;var a=this,n=m(t),r=i.default.findDOMNode(t);return s.default.each(n,function(t){h(e,t.rule,r[t.name])}),a.setState({}),0===a.validateTip().length},validateTip:function(t){return t?e.tip[t]:s.default.map(s.default.filter(e.tip,function(e){return e!==!0}),function(e){return e})}}};t.default=g},function(e,t){}])});