!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactGM=t(require("react")):e.ReactGM=t(e.React)}(this,function(e){return function(e){function t(n){if(a[n])return a[n].exports;var l=a[n]={exports:{},id:n,loaded:!1};return e[n].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(4),r=n(l),i=a(2),s=n(i),c=a(3),u=n(c);a(5),t.Grid=r.default,t.Pagination=s.default,t.PaginationText=u.default},function(t,a){t.exports=e},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(1),r=n(l),i=r.default.createClass({displayName:"Pagination",propTypes:{data:r.default.PropTypes.shape({total:r.default.PropTypes.number.isRequired,index:r.default.PropTypes.number.isRequired,size:r.default.PropTypes.number.isRequired}),toPage:r.default.PropTypes.func.isRequired},render:function(){var e=this.props.data,t=2,a=[],n=Math.ceil(e.total/e.size),l=Math.max(e.index-t,1),i=Math.min(e.index+t,n);n>2*t+1&&(1===l?i+=t:i===n&&(l-=t));for(var s=l;i>=s;s++)a.push(s);return r.default.createElement("div",{className:"gm-pagination"},r.default.createElement("ul",{className:"pagination pagination-sm",onClick:this.onPage},r.default.createElement("li",{className:1===e.index?"disabled":""},r.default.createElement("a",{href:"javascript:;","data-page":e.index-1},"上一页")),l>=2?r.default.createElement("li",null,r.default.createElement("a",{href:"javascript:;","data-page":"1"},"1")):"",l>=3?r.default.createElement("li",{className:"disabled"},r.default.createElement("a",{href:"javascript:;"},"...")):"",a.map(function(t){return r.default.createElement("li",{className:e.index===t?"active":""},r.default.createElement("a",{href:"javascript:;","data-page":t},t))}),n-2>=i?r.default.createElement("li",{className:"disabled"},r.default.createElement("a",{href:"javascript:;"},"...")):"",n-1>=i?r.default.createElement("li",null,r.default.createElement("a",{href:"javascript:;","data-page":n},n)):"",r.default.createElement("li",{className:e.index===n?"disabled":""},r.default.createElement("a",{href:"javascript:;","data-page":e.index+1},"下一页"))))},onPage:function(e){var t=e.target.getAttribute("data-page"),a=this.props.data,n=Math.ceil(a.total/a.size),l=this.props.toPage;!t||t==a.index||1>t||t>n||l(t)}});t.default=i,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(1),r=n(l),i=r.default.createClass({displayName:"PaginationText",propTypes:{data:r.default.PropTypes.shape({total:r.default.PropTypes.number.isRequired,index:r.default.PropTypes.number.isRequired,size:r.default.PropTypes.number.isRequired})},render:function(){var e=this.props.data;return r.default.createElement("div",{className:"gm-pagination-text"},"显示第 ",e.index*e.size+1," 到 ",Math.min(e.total,e.index*e.size+e.size)," 行，一共 ",e.total," 行记录")}});t.default=i,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(1),r=n(l),i=a(2),s=n(i),c=a(3),u=n(c),d=r.default.createClass({displayName:"GridHead",render:function(){var e=this.props.data;return r.default.createElement("thead",null,r.default.createElement("tr",null,e.enableSelect?r.default.createElement("th",{className:"gm-grid-select"},r.default.createElement("input",{type:"checkbox",onClick:this.onSelect})):"",e.columns.map(function(e){return r.default.createElement("th",null,e.name)}),e.actions.length>0?r.default.createElement("th",null,"操作"):""))},onSelect:function f(e){var f=this.props.onSelect;f(e.target.checked)}}),o=r.default.createClass({displayName:"Grid",processData:function(e){return e=Object.assign({enableSelect:!1,enablePagination:!1,enablePaginationText:!1,actions:[],batchs:[],list:[],toPage:function(){}},e),e.actions.forEach(function(e){e.isShow=e.isShow||function(){return!0}}),e.list.forEach(function(e){e.___select=!1}),e},getInitialState:function(){return{data:this.processData(this.props.data)}},componentWillReceiveProps:function(e){this.setState({data:this.processData(e.data)})},render:function(){var e=this,t=this.state.data,a=t.actions,n=t.batchs,l=t.list.map(function(n,l){var i=t.columns.map(function(e){return e.render?r.default.createElement("td",null,""+e.render(n[e.field],n)):r.default.createElement("td",null,""+n[e.field])}),s=a.map(function(t){var a="btn btn-default btn-xs "+t.className;return t.isShow(n,l)===!1&&(a+=" hidden"),r.default.createElement("button",{onClick:e.onActions.bind(e,n,l,t),className:a},t.text)});return r.default.createElement("tr",null,t.enableSelect?r.default.createElement("td",null,r.default.createElement("input",{type:"checkbox",checked:n.___select,onClick:e.onSelect.bind(e,n)})):"",i,a.length>0?r.default.createElement("td",null,s):"")}),i=n.map(function(t){var a="btn btn-default btn-sm "+t.className;return r.default.createElement("button",{onClick:e.onBatchs.bind(e,t),className:a},t.text)}),c=r.default.createElement("div",null,r.default.createElement("div",{className:"pull-right"},r.default.createElement(s.default,{data:t.pagination,toPage:e.onToPage})),r.default.createElement("div",{className:"pull-right"},r.default.createElement(u.default,{data:t.pagination})));return r.default.createElement("div",{className:"gm-grid"},r.default.createElement("table",{className:"table table-striped table-hover table-condensed table-bordered"},r.default.createElement(d,{data:t,onSelect:e.onSelectAll}),r.default.createElement("tbody",null,l)),r.default.createElement("div",{className:"gm-grid-foot clearfix"},r.default.createElement("div",{className:"pull-left gm-grid-batch"},t.enableSelect?i:""),t.pagination?c:""))},onActions:function(e,t,a){a.click(e,t)},onBatchs:function(e){var t=this.state.data.list.filter(function(e){return e.___select});t.length>0&&e.click(t)},onSelect:function(e,t){e.___select=t.target.checked,this.setState({list:this.state.data.list})},onSelectAll:function(e){this.setState({list:this.state.data.list.map(function(t){t.___select=e})})},onToPage:function(e){this.state.data.toPage(e)}});t.default=o,e.exports=t.default},function(e,t){}])});